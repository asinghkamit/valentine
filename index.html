<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vandana baby Be My Valentine?</title>
    <link href="https://fonts.googleapis.com/css2?family=Indie+Flower&family=Poppins:wght@600&display=swap" rel="stylesheet">
    <style>
        /* --- RESET --- */
        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            height: 100vh;
            width: 100vw;
            display: flex;
            justify-content: center;
            align-items: center;
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%);
            overflow: hidden; 
        }

        #bg-container {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            pointer-events: none;
            z-index: 0;
            overflow: hidden;
        }

        .bg-item {
            position: absolute;
            top: 0; color: #fff; 
            animation-name: floatUp;
            animation-timing-function: linear;
            z-index: 1;
        }

        @keyframes floatUp {
            0% { transform: translateY(110vh) scale(0.5); opacity: 0; }
            10% { opacity: 0.8; }
            90% { opacity: 0.8; }
            100% { transform: translateY(-10vh) scale(1.2); opacity: 0; }
        }

        .card {
            position: relative;
            width: 90%;
            max-width: 650px; 
            background: rgba(255, 255, 255, 0.65);
            border: 3px solid rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(15px);
            padding: 50px 40px;
            border-radius: 35px;
            text-align: center;
            box-shadow: 0 25px 45px rgba(0,0,0,0.15);
            z-index: 10;
        }

        .card img {
            width: 100%;
            max-width: 450px; 
            border-radius: 15px;
            margin-bottom: 20px;
        }

        h1 {
            color: #d6335c;
            font-family: 'Indie Flower', cursive;
            font-size: 2.8rem;
            margin-bottom: 10px;
        }

        p {
            color: #7a4f5a;
            margin-bottom: 30px; 
            font-size: 1.2rem;
            font-weight: 500;
        }

        .btn-container {
            display: flex;
            justify-content: center;
            gap: 20px;
            position: relative;
            z-index: 20;
        }

        button {
            padding: 15px 35px;
            font-size: 1.2rem;
            font-weight: 700;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: 0.2s;
        }

        #yesBtn { background-color: #ff4d6d; color: white; }
        #noBtn { background-color: white; color: #ff4d6d; }

        .shy-text {
            color: #5d469f;
            font-size: 1rem; 
            margin-top: 50px; 
            font-style: italic;
        }

        .move-mode { position: absolute; z-index: 9999; }
        
        #fireworks {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            pointer-events: none;
            z-index: 100;
        }

        .float-text {
            position: fixed;
            color: #d6335c;
            font-family: 'Indie Flower', cursive;
            font-size: 1.5rem;
            pointer-events: none;
            z-index: 99999;
            animation: floatUpFade 1s forwards;
        }

        @keyframes floatUpFade {
            0% { opacity: 1; transform: translateY(0); }
            100% { opacity: 0; transform: translateY(-60px); }
        }
    </style>
</head>
<body>

<audio id="loveSong" loop>
    <source src="I_Wanna_Be_Yours.mp3" type="audio/mpeg">
</audio>

<div id="bg-container"></div>
<canvas id="fireworks"></canvas>

<div class="card" id="card">
    <img id="display-img" src="https://giffiles.alphacoders.com/218/218702.gif" alt="Cute Bear">
    <h1 id="question">Vandana will you be my Valentine?</h1>
    <p id="sub-text">I promise to buy you momos! ðŸ¥Ÿ</p>

    <div id="controls" class="btn-container">
        <button id="yesBtn" onclick="sayYes()">Yes</button>
        <button id="noBtn" onmouseover="handleNo()" ontouchstart="handleNo()">No</button>
    </div>
    <div id="shy-hint" class="shy-text">"No" seems a bit shy ðŸ˜ˆ</div>
</div>

<script>
    const audio = document.getElementById('loveSong');
    const card = document.getElementById('card');
    const noBtn = document.getElementById('noBtn');
    let fireworksActive = false;

    // --- 1. FIXED MUSIC LOGIC ---
    // Browsers block audio until a user clicks or moves. This catches everything.
    function startMusic() {
        if (audio.paused) {
            audio.play().catch(() => {});
        }
    }
    ['click', 'touchstart', 'mousemove', 'keydown'].forEach(evt => 
        document.addEventListener(evt, startMusic, { once: true })
    );

    // --- 2. NO BUTTON LOGIC ---
    function handleNo() {
        startMusic();
        if (noBtn.parentNode !== document.body) document.body.appendChild(noBtn);
        noBtn.classList.add('move-mode');
        noBtn.style.left = Math.random() * (window.innerWidth - 150) + 'px';
        noBtn.style.top = Math.random() * (window.innerHeight - 50) + 'px';
        
        // Spawn floating text
        const txt = document.createElement('div');
        txt.className = 'float-text';
        txt.innerHTML = "Nope! ðŸ˜ˆ";
        txt.style.left = event.clientX + 'px';
        txt.style.top = event.clientY + 'px';
        document.body.appendChild(txt);
        setTimeout(() => txt.remove(), 1000);
    }

    // --- 3. FIXED YES LOGIC ---
    function sayYes() {
        startMusic(); // Ensure music plays
        
        // A. IMMEDIATE UPDATE: Change card content right away
        document.getElementById('controls').remove();
        document.getElementById('shy-hint').remove();
        document.getElementById('display-img').src = "https://media.tenor.com/gUiu1zyxfzYAAAAi/bear-kiss-bear-kisses.gif";
        document.getElementById('question').innerHTML = "YEEEY! â¤ï¸";
        document.getElementById('sub-text').innerHTML = "I knew you would say yes! See you soon!";

        // B. IMMEDIATE FIREWORKS: Start the animation
        fireworksActive = true;
        startFireworks();

        // C. WAIT 5 SECONDS THEN REDIRECT
        setTimeout(() => {
            const phoneNumber = "918968492244"; 
            const message = "Yes! I will be your Valentine babu! ðŸ˜˜ðŸ˜˜â¤ï¸";
            window.location.href = `https://wa.me/${phoneNumber}?text=${encodeURIComponent(message)}`;
        }, 5000);
    }

    // --- 4. FIREWORKS ENGINE ---
    function startFireworks() {
        const canvas = document.getElementById('fireworks');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        let particles = [];

        function Particle(x, y) {
            this.x = x; this.y = y;
            this.radius = Math.random() * 3 + 1;
            this.color = `hsl(${Math.random() * 360}, 100%, 50%)`;
            this.velocity = { x: (Math.random() - 0.5) * 10, y: (Math.random() - 0.5) * 10 };
            this.alpha = 1;
        }
        Particle.prototype.draw = function() {
            ctx.save(); ctx.globalAlpha = this.alpha;
            ctx.beginPath(); ctx.arc(this.x, this.y, this.radius, 0, Math.PI*2);
            ctx.fillStyle = this.color; ctx.fill(); ctx.restore();
        }

        function animate() {
            requestAnimationFrame(animate);
            ctx.fillStyle = 'rgba(255, 255, 255, 0.15)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            particles.forEach((p, i) => {
                p.velocity.y += 0.05; p.x += p.velocity.x; p.y += p.velocity.y;
                p.alpha -= 0.01;
                if (p.alpha <= 0) particles.splice(i, 1); else p.draw();
            });
        }
        animate();

        setInterval(() => {
            if (fireworksActive) {
                const x = Math.random() * canvas.width;
                const y = Math.random() * (canvas.height * 0.5);
                for(let i=0; i<40; i++) particles.push(new Particle(x, y));
            }
        }, 400);
    }

    // Background Hearts
    setInterval(() => {
        const el = document.createElement('div');
        el.className = 'bg-item';
        el.innerHTML = 'â¤ï¸';
        el.style.left = Math.random() * 100 + 'vw';
        el.style.fontSize = Math.random() * 20 + 10 + 'px';
        const dur = Math.random() * 3 + 4;
        el.style.animationDuration = dur + 's';
        document.getElementById('bg-container').appendChild(el);
        setTimeout(() => el.remove(), dur * 1000);
    }, 400);
</script>
</body>
</html>
